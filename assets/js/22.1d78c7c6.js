(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{414:function(s,t,e){"use strict";e.r(t);var r=e(2),a=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"设置-ssh以及scp-通过密钥认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置-ssh以及scp-通过密钥认证"}},[s._v("#")]),s._v(" 设置 SSH以及SCP 通过密钥认证")]),s._v(" "),t("h3",{attrs:{id:"制作密钥对"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#制作密钥对"}},[s._v("#")]),s._v(" 制作密钥对")]),s._v(" "),t("p",[t("code",[s._v('ssh-keygen -t ed25519 -C "1075309047@qq.com"')]),s._v("# 用于代码库")]),s._v(" "),t("p",[t("code",[s._v('ssh-keygen -o -t rsa -b 4096 -C "root@hostname" -f ~/.ssh/id_rsa')]),s._v("# 用于服务器")]),s._v(" "),t("p",[s._v("如果您确实使用密码，请确保添加 -o 选项；它以一种比默认格式更能抵抗暴力破解密码的格式保存私钥。")]),s._v(" "),t("p",[s._v("您还可以使用 ssh-agent 工具来避免每次都必须输入密码。")]),s._v(" "),t("h3",{attrs:{id:"在服务器上安装公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在服务器上安装公钥"}},[s._v("#")]),s._v(" 在服务器上安装公钥")]),s._v(" "),t("p",[t("code",[s._v("cat id_rsa.pub >> ~/.ssh/authorized_keys")])]),s._v(" "),t("p",[t("strong",[s._v("注意")]),s._v("：如果root账号已禁用ssh登陆，请安装到普通账号的家目录下")]),s._v(" "),t("h3",{attrs:{id:"修改权限-仅所有者可读可写"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改权限-仅所有者可读可写"}},[s._v("#")]),s._v(" 修改权限（仅所有者可读可写）")]),s._v(" "),t("p",[t("code",[s._v("chmod 700 ~/.ssh")])]),s._v(" "),t("p",[t("code",[s._v("chmod 600 ~/.ssh/authorized_keys")])]),s._v(" "),t("h2",{attrs:{id:"ssh-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh-配置"}},[s._v("#")]),s._v(" SSH 配置")]),s._v(" "),t("p",[t("code",[s._v("sudo vim /etc/ssh/sshd_config")])]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("Port 22                     # 更改 ssh 端口，默认为22\nPermitRootLogin no          # ssh 允许root登录，默认为yes\nPasswordAuthentication no   # ssh 允许密码登录，默认为yes\nRSAAuthentication yes       # 启用 RSA 认证，默认为yes\nPubkeyAuthentication yes    # 启用公钥认证，默认为yes\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("注意")]),s._v("：腾讯云服务器控制台的远程登录使用默认 ssh 端口。")]),s._v(" "),t("p",[t("strong",[s._v("注意")]),s._v("：为了保证你不会失联，请不要关闭当前的 ssh 登录窗口！而是另外开一个窗口来测试！")]),s._v(" "),t("h2",{attrs:{id:"重启-ssh-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启-ssh-服务"}},[s._v("#")]),s._v(" 重启 SSH 服务")]),s._v(" "),t("p",[t("code",[s._v("systemctl restart sshd")])]),s._v(" "),t("h2",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://git-scm.com/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://git-scm.com/book/en/v2/Git-on-the-Server-Generating-Your-SSH-Public-Key"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"https://www.runoob.com/w3cnote/set-ssh-login-key.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.runoob.com/w3cnote/set-ssh-login-key.html"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=a.exports}}]);